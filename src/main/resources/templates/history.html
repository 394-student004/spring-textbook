<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>購入履歴</title>
	<link rel="stylesheet" type="text/css" href="/css/style.css">
</head>

<body>
	<header th:replace="header"></header>
	<main>
		<h1>購入履歴</h1>

		<div th:each="history:${histories}">
			<span>注文日：</span>
			<span th:text="${history.orderedOn}"></span><br>
			<span>注文番号：</span>
			<span th:text="${history.id}"></span><br>
			<span>支払金額：</span>
			<span th:text="'&yen;' + ${history.totalPrice}"></span>

			<form action="/history/delete" method="post">
				<input type="hidden" name="historyId" th:value="${history.id}">
				<button>注文キャンセル</button>
			</form>

			<table table="1">
				<tr>
					<th>教科書</th>
					<th>数量</th>
				</tr>
				<tr th:each="detailHistory:${detailHistories}" th:if="${detailHistory.orderId == history.id}">
					<td th:text="${detailHistory.itemName}"></td>
					<td th:text="${detailHistory.quantity}"></td>
				</tr>
			</table>

		</div>
	</main>
	<footer th:replace="footerBigFoot"></footer>
</body>

</html>